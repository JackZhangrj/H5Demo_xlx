<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.13.0/dist/av-live-query-min.js"></script>
    <script>
/*        var { Query, User } = AV;*/
        AV.init({ appId: "PRPaPd9srLr3f29041is7qL4-gzGzoHsz", appKey: "yyNfnMyG5B7dsp8DU36pgBy0"});

// 声明一个 Todo 类型
var Todo = AV.Object.extend('Todo');
// 新建一个 Todo 对象
/*var todo = new Todo();
todo.set('title', '工程师周会');
todo.set('content', '每周工程师会议，周一下午2点');
todo.save().then(function (todo) {
    // 成功保存之后，执行其他逻辑.
    console.log('New object created with objectId: ' + todo.id);
}, function (error) {
    // 异常处理
    console.error('Failed to create new object, with error message: ' + error.message);
});*/

// 找出开头是「早餐」的 Todo
var query = new AV.Query('h5demo_xlx');
query.equalTo('name', 'zhang');

/*分别找出 status = 1 的全部 Todo 结果，*/
/*var cql = 'select * from Todo title name = "工程师周会"';
AV.Query.doCloudQuery(cql).then(function (data) {
    // results 即为查询结果，它是一个 AV.Object 数组
    var results = data.results;
    console.log('New object created with objectId: ' + results[0]);
}, function (error) {
});*/

query.find().then(function(results) {
    // 返回一个符合条件的 list
    var obj = results[0];
    console.log(obj.attributes);
/*    obj.set('phone', '182xxxx5548');
    // save 方法也是一个异步方法，会返回一个 Promise，所以在此处，你可以直接 return 出去，后续操作就可以支持链式 Promise 调用
    return obj.save();*/
}).then(function() {
    // 这里是 save 方法返回的 Promise
    console.log('设置手机号码成功');
}).catch(function(error) {
    // catch 方法写在 Promise 链式的最后，可以捕捉到全部 error
    console.error(error);
});
    </script>
</head>
<body>

</body>
</html>